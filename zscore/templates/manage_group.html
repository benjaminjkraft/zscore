{% extends 'frame.html' %}

{% load sleep_tags %}

{% block content %}
<h1>Manage {{group.name}}</h1>
<p><i>{{group.description}}</i></p>
<p>See the group <a href="/leaderboard/{{group.id}}/">leaderboard</a>!</p>

<h3>Members</h3>
<table>
    {% for member in members %}
        {% displayGroupMember group member %}
    {% endfor %}
</table>

<h3>Add members</h3>
<form method="post">{% csrf_token %}
    {{searchForm.as_p}}
    <p><input type="submit" value="Add" name="SleeperSearchForm"/></p>
</form>
{% if count %}
{% if results %}
    <table>
    {% for user in results %}
        {% displayGroupMember group user %}
    {% endfor %}
    </table>
{% else %}
    No users found.
    {% endif %}
    {% endif %}

{% if isAdmin %}

<h3>Edit Group</h3>
<form method="post">{% csrf_token %}
    <table>
        {{groupForm.as_table}}
    </table>
    <p><input type="submit" value="Save" name="GroupForm"/></p>
</form>

<h3>Requests</h3>
{% for r in requests %}
    {% displayUser r.user %}
{% endfor %}

{% endif %}
{% endblock %}
